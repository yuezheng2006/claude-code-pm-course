---
title: "1.4: Agents for Parallel Work"
description: "Master Claude Code parallel agents to process 10 files simultaneously. Learn to run multiple AI instances for batch PM workflows and analysis."
keywords: 'claude code agents, parallel processing, AI agents, batch processing, claude code workflow'
---

## 1.4: Agents for Parallel Work

 - **完成时间：** 25 分钟
 - **前提要求：** 模块 1.3（文件操作和 @ 引用）


> **在 Claude Code 中开始此模块：** 运行 `/start-1-4` 开始互动体验。

## 📖 概述

模块 1.4 介绍 **代理** - 独立运行的 Claude 实例，可以并行工作。与其顺序处理 10 个会议记录（50 分钟），不如同时启动 10 个代理（5 分钟）。

**关键要点：** 代理将 Claude Code 从单个助手转变为可扩展的团队。这不仅仅是更快 - 它解锁了全新的工作流程。


## 🤯 什么是代理？

### 核心概念

**代理是独立运行的 Claude 实例，可以并行工作。**

想象一下克隆自己来同时处理多个任务：

**顺序工作（没有代理）：**
```
任务 1 (5 分钟) → 任务 2 (5 分钟) → 任务 3 (5 分钟) → ... → 任务 10 (5 分钟)
总时间：50 分钟
```

**并行工作（使用代理）：**
```
任务 1 (5 分钟) ┐
任务 2 (5 分钟) │
任务 3 (5 分钟) ├─→ 全部同时发生
...            │
任务 10 (5 分钟)┘
总时间：5 分钟
```

### 代理能力

| 每个代理拥有 | 每个代理不拥有 |
|----------------|--------------------------|
| 完整的文件系统访问权限 | 与其他代理的通信 |
| 所有 Claude 的能力 | 共享状态 |
| 独立上下文 | 其他代理结果的知识（直到合成） |
| 工具使用（读取/写入文件） | 顺序依赖关系 |


## 🎯 何时使用代理

### 决策框架

| 场景 | 使用代理？ | 代理数量 |
|----------|-------------|-------------|
| 批量处理（10 个会议，20 个访谈） | ✅ 是 | 多个（5-20+） |
| 并行研究（5 个竞争对手，3 个市场） | ✅ 是 | 少数（2-5） |
| 多源分析（访谈 + 调查 + 工单） | ✅ 是 | 少数（2-4） |
| 单个任务 | ❌ 否 | 0 - 直接使用 Claude |
| 顺序工作（任务相互依赖） | ❌ 否 | 0 |
| 快速任务（只需几秒钟） | ❌ 否 | 0 |

### 使用代理的情况：

- **批量处理：** 对许多项目进行相同类型的工作
- **并行研究：** 独立研究多个实体
- **多源分析：** 对不同来源进行不同分析
- **时间敏感的工作：** 需要在几小时内而不是几天内获得结果

### 跳过代理的情况：

- 单个任务（直接提示 Claude）
- 顺序工作（任务相互依赖）
- 快速任务（简单的请求只需几秒钟）
- 上下文依赖的工作（需要建立在之前的工作基础上）


## 🔧 如何提示代理

### 模式 1：明确的代理请求

```
创建 10 个代理来处理 /meetings 中的 10 个会议记录。
每个代理应该提取：
- 关键决策
- 行动项
- 阻碍因素
- 下一步行动

将所有结果合并到 @weekly-summary.md 中
```

### 模式 2：让 Claude 决定

```
我有 15 个竞争对手网站需要研究功能和定价。
并行工作以快速完成。
```

### 模式 3：专业化代理

```
启动 3 个专业化代理：
- 代理 1：分析 /interviews 中的所有访谈记录
- 代理 2：处理 @survey-results.csv 中的调查数据
- 代理 3：审查 /support 中的支持工单

将发现合成到 @user-research-insights.md 中
```


## 💼 实际世界例子

### 例子 1：会议处理

**场景：** 周一早上，10 个会议记录，1 小时后站会。

**提示：**
```
我有 10 个会议记录在 /meetings/last-week/ 中。

创建 10 个代理来同时处理每个会议。

对于每个会议，提取：
- 做出的关键决策
- 行动项（包含负责人和截止日期）
- 提出的阻碍因素或风险

将所有发现合成到 @monday-standup-prep.md 中，包含：
- 第 1 部分：关键阻碍因素
- 第 2 部分：关键决策
- 第 3 部分：按团队成员划分的行动项
```

**结果：** 5 分钟 vs 60 分钟顺序工作。

### 例子 2：竞争研究

**场景：** CEO 需要在今天结束前对 5 个竞争对手进行竞争分析。

**提示：**
```
同时启动 5 个代理来研究这些竞争对手：
- 全民K歌（腾讯）、唱吧、酷狗音乐、视易、音王

对于每个竞争对手，研究：
- 产品功能和能力
- 定价层级和商业模式
- 目标市场和用户群体
- 近期更新（过去 6 个月）
- 用户评价和市场表现

创建单独的文件：@competitor-[name]-research.md

然后合成到 @competitive-analysis.md 中，包含：
- K歌功能比较矩阵
- 商业模式对比
- 市场定位分析
- 我们的差异化机会
```

**结果：** 1 小时 vs 5.5 小时顺序工作。


## 🎨 代理编排模式

### 模式 1：扇出处理

**适用于：** 多个相似任务，需要合并所有结果

```
使用 15 个代理处理 /meetings/ 中的所有 15 个文件。
从每个文件中提取行动项。
合并到按负责人分组的单个行动项列表中。
```

### 模式 2：专业化角色

**适用于：** 对不同来源进行不同类型的分析

```
启动 3 个专业化代理：
- 代理 1（访谈专家）：分析定性数据
- 代理 2（数据分析师）：处理调查数字
- 代理 3（支持分析师）：分类工单主题

合成到全面的用户研究报告中。
```

### 模式 3：并行研究

**适用于：** 独立研究多个实体

```
并行研究这 5 个竞争对手。
每个代理创建详细资料。
合成到比较矩阵中。
```

### 模式 4：批量文档生成

**适用于：** 创建多个相似文档

```
从 @prd.md 生成 20 个带有验收标准的用户故事。
使用代理并行创建故事。
确保格式和质量的一致性。
```

### 模式 5：验证管道

**适用于：** 审查多个文档的质量

```
根据我们的质量检查清单审查 /docs/prds/ 中的所有 PRD。
每个代理审查一个 PRD。
创建问题和建议的总结报告。
```


## 💡 最佳实践

### 要做的：

- **用于时间敏感的批量工作** - 当你需要快速获得结果时
- **让 Claude 决定代理数量** - "并行处理这些文件" 效果很好
- **提供清晰的单个任务说明** - 每个代理需要知道该做什么
- **请求合成** - 告诉 Claude 有意义地组合代理结果
- **指定输出格式** - 标准化代理输出以便更容易合成

### 不要做的：

- **不要用于单个任务** - 直接提示 Claude
- **不要创建需要通信的代理** - 它们独立工作
- **不要用于顺序工作** - 有依赖关系的任务应该按顺序完成
- **不要忘记合成** - 原始代理输出需要组合
- **不要过度代理小任务** - 如果需要 30 秒，不要使用代理


## 🐛 故障排除

**代理没有并行工作？**
- 明确说明："创建代理并行工作" 或 "同时处理"
- 使用短语如"同时"

**代理结果不一致？**
- 提供清晰的模板：
  ```
  每个代理应该输出包含这些部分的 markdown：
  ## 摘要
  ## 关键发现
  ## 建议
  ```

**创建的代理太多？**
- 指定确切数量："创建正好 5 个代理"
- 或提供约束："根据需要使用尽可能多的代理，最多 10 个"

**代理完成后没有合成？**
- 总是以结尾："所有代理完成后，将结果合成到 @summary.md 中"

**一个代理失败了？**
- 检查错误消息以获取具体问题
- 确保所有引用的文件存在
- 验证说明是否清晰


## 🚀 下一步是什么？

你现在了解了临时代理 - 为特定并行任务即时创建的临时代理。

**模块 1.5** 介绍 **自定义子代理** - 具有个性、专业化和视觉身份（表情符号和颜色）的永久团队成员。与其每次都说"像工程师一样行事"，你将拥有一个 👨‍💻 工程师子代理，可以随时调用。

**区别：**
- **模块 1.4（临时代理）：** 用于并行处理的临时克隆
- **模块 1.5（自定义子代理）：** 永久的专业化团队成员

互动轨道：输入 `/start-1-5`


---

